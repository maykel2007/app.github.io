<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head><link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Video Time">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>حاسبة وقت الفيديو</title>

<!-- Google Icons -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<style>
:root{
  --main:#2f3e46;
  --accent:#3a5a40;
  --danger:#e76f51;
  --bg:#eef2f3;
  --card:#ffffff;
}
*{box-sizing:border-box;font-family:'Cairo',system-ui}
body{margin:0;background:var(--bg)}
header{
  background:linear-gradient(135deg,#52796f,#354f52);
  color:#fff;padding:18px;text-align:center;font-size:20px;font-weight:700
}
.page{display:none;padding:16px}
.page.active{display:block}
.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.08)
}
.big{
  font-size:46px;
  text-align:center;
  margin:20px 0;
  font-weight:700;
  color:var(--main)
}
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:18px;
  text-align:center
}
.row{display:flex;gap:10px}
.row input{flex:1}
.btn{
  width:100%;
  padding:14px;
  border-radius:16px;
  border:none;
  font-size:18px;
  font-weight:600;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  cursor:pointer
}
.btn-main{background:var(--main);color:#fff}
.btn-add{background:var(--accent);color:#fff}
.btn-danger{background:var(--danger);color:#fff}
.btn-ghost{background:#e9ecef}
.fab{
  position:fixed;
  bottom:20px;
  left:20px;
  width:60px;
  height:60px;
  border-radius:50%;
  background:var(--main);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
  box-shadow:0 10px 25px rgba(0,0,0,.25)
}
.project{
  display:flex;
  justify-content:space-between;
  align-items:center
}
.project span{font-size:20px;font-weight:600}
</style>
</head>
<body>

<header id="header">حاسبة وقت الفيديو</header>

<div id="home" class="page active"></div>

<div id="calc" class="page">
  <div class="big" id="calcTotal">00:00</div>

  <div class="card">
    <h3>إضافة وقت سريع</h3>
    <div class="row">
      <input id="minAdd" placeholder="دقيقة" type="number">
      <input id="secAdd" placeholder="ثانية" type="number">
    </div>
    <button class="btn btn-add" onclick="add(true)">
      <span class="material-icons-outlined">add</span> إضافة
    </button>
  </div>

  <div class="card" style="background:#fff5f3">
    <h3 style="color:var(--danger)">طرح وقت سريع</h3>
    <div class="row">
      <input id="minSub" placeholder="دقيقة" type="number">
      <input id="secSub" placeholder="ثانية" type="number">
    </div>
    <button class="btn btn-danger" onclick="add(false)">
      <span class="material-icons-outlined">remove</span> طرح
    </button>
  </div>

  <button class="btn btn-main" onclick="openCounter()">
    <span class="material-icons-outlined">visibility</span> صفحة العداد
  </button>
  <button class="btn btn-ghost" onclick="goHome()">رجوع</button>
</div>

<div id="counter" class="page">
  <div class="big" id="counterTotal">00:00</div>
  <button class="btn btn-main" onclick="openCalc()">رجوع للحساب</button>
</div>

<div class="fab" onclick="newProject()">
  <span class="material-icons-outlined">add</span>
</div>

<script>
let projects = JSON.parse(localStorage.getItem('projects')) || [];
let current = null;

function format(s){
  let m=Math.floor(s/60),sec=s%60;
  return String(m).padStart(2,'0')+':'+String(sec).padStart(2,'0');
}
function save(){localStorage.setItem('projects',JSON.stringify(projects));}
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function render(){
  home.innerHTML='';
  projects.forEach((p,i)=>{
    let d=document.createElement('div');
    d.className='card project';
    d.innerHTML=`<span>${p.title}</span><b>${format(p.total)}</b>`;
    d.onclick=()=>openCalcPage(i);
    home.appendChild(d);
  });
}
function newProject(){
  let t=prompt('عنوان الحساب');
  if(!t)return;
  projects.push({title:t,total:0});
  save();render();
}
function openCalcPage(i){
  current=i;
  header.textContent=projects[i].title;
  calcTotal.textContent=format(projects[i].total);
  show('calc');
}
function add(plus){
  let m=plus?minAdd.value:minSub.value;
  let s=plus?secAdd.value:secSub.value;
  let sec=(+m*60)+(+s);
  projects[current].total+=plus?sec:-sec;
  if(projects[current].total<0)projects[current].total=0;
  calcTotal.textContent=format(projects[current].total);
  minAdd.value=secAdd.value=minSub.value=secSub.value='';
  save();
}
function openCounter(){
  counterTotal.textContent=format(projects[current].total);
  show('counter');
}
function openCalc(){show('calc');}
function goHome(){header.textContent='حاسبة وقت الفيديو';show('home');render();}
render();
</script>

</body>
</html>
